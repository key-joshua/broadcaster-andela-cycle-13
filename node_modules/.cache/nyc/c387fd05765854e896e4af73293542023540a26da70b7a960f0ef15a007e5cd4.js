"use strict";var cov_10l561xvfw=function(){var path="C:\\Users\\Positivo_Computer\\Desktop\\broadcast-andela-cycle13\\server\\v1\\api\\controllers\\updateLocation.js";var hash="6b28079fe5ea3a5e2ad4532e0ebb78d6ed137605";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Positivo_Computer\\Desktop\\broadcast-andela-cycle13\\server\\v1\\api\\controllers\\updateLocation.js",statementMap:{"0":{start:{line:3,column:29},end:{line:3,column:84}},"1":{start:{line:5,column:0},end:{line:7,column:3}},"2":{start:{line:8,column:0},end:{line:8,column:28}},"3":{start:{line:10,column:19},end:{line:10,column:80}},"4":{start:{line:12,column:25},end:{line:12,column:99}},"5":{start:{line:14,column:14},end:{line:14,column:55}},"6":{start:{line:16,column:20},end:{line:16,column:67}},"7":{start:{line:18,column:10},end:{line:18,column:57}},"8":{start:{line:20,column:13},end:{line:20,column:64}},"9":{start:{line:22,column:0},end:{line:22,column:28}},"10":{start:{line:24,column:26},end:{line:107,column:1}},"11":{start:{line:26,column:36},end:{line:99,column:7}},"12":{start:{line:31,column:6},end:{line:98,column:18}},"13":{start:{line:32,column:8},end:{line:97,column:9}},"14":{start:{line:33,column:10},end:{line:96,column:11}},"15":{start:{line:35,column:14},end:{line:35,column:68}},"16":{start:{line:36,column:14},end:{line:36,column:147}},"17":{start:{line:37,column:14},end:{line:37,column:99}},"18":{start:{line:38,column:14},end:{line:38,column:56}},"19":{start:{line:39,column:14},end:{line:39,column:32}},"20":{start:{line:40,column:14},end:{line:40,column:61}},"21":{start:{line:43,column:14},end:{line:43,column:35}},"22":{start:{line:45,column:14},end:{line:48,column:15}},"23":{start:{line:46,column:16},end:{line:46,column:34}},"24":{start:{line:47,column:16},end:{line:47,column:22}},"25":{start:{line:50,column:14},end:{line:53,column:18}},"26":{start:{line:56,column:14},end:{line:59,column:15}},"27":{start:{line:57,column:16},end:{line:57,column:35}},"28":{start:{line:58,column:16},end:{line:58,column:22}},"29":{start:{line:61,column:14},end:{line:64,column:18}},"30":{start:{line:67,column:14},end:{line:70,column:15}},"31":{start:{line:68,column:16},end:{line:68,column:35}},"32":{start:{line:69,column:16},end:{line:69,column:22}},"33":{start:{line:72,column:14},end:{line:75,column:18}},"34":{start:{line:78,column:14},end:{line:81,column:16}},"35":{start:{line:82,column:14},end:{line:82,column:33}},"36":{start:{line:83,column:14},end:{line:83,column:95}},"37":{start:{line:86,column:14},end:{line:86,column:44}},"38":{start:{line:87,column:14},end:{line:91,column:18}},"39":{start:{line:95,column:14},end:{line:95,column:37}},"40":{start:{line:102,column:6},end:{line:102,column:62}},"41":{start:{line:105,column:4},end:{line:105,column:36}},"42":{start:{line:108,column:15},end:{line:108,column:34}},"43":{start:{line:109,column:0},end:{line:109,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:25,column:28},end:{line:25,column:29}},loc:{start:{line:25,column:40},end:{line:106,column:3}},line:25},"1":{name:"_callee",decl:{start:{line:28,column:42},end:{line:28,column:49}},loc:{start:{line:28,column:60},end:{line:99,column:5}},line:28},"2":{name:"_callee$",decl:{start:{line:31,column:51},end:{line:31,column:59}},loc:{start:{line:31,column:70},end:{line:98,column:7}},line:31},"3":{name:"updateOneRecordsLocation",decl:{start:{line:101,column:13},end:{line:101,column:37}},loc:{start:{line:101,column:47},end:{line:103,column:5}},line:101}},branchMap:{"0":{loc:{start:{line:33,column:10},end:{line:96,column:11}},type:"switch",locations:[{start:{line:34,column:12},end:{line:40,column:61}},{start:{line:42,column:12},end:{line:53,column:18}},{start:{line:55,column:12},end:{line:64,column:18}},{start:{line:66,column:12},end:{line:75,column:18}},{start:{line:77,column:12},end:{line:83,column:95}},{start:{line:85,column:12},end:{line:91,column:18}},{start:{line:93,column:12},end:{line:93,column:20}},{start:{line:94,column:12},end:{line:95,column:37}}],line:33},"1":{loc:{start:{line:45,column:14},end:{line:48,column:15}},type:"if",locations:[{start:{line:45,column:14},end:{line:48,column:15}},{start:{line:45,column:14},end:{line:48,column:15}}],line:45},"2":{loc:{start:{line:56,column:14},end:{line:59,column:15}},type:"if",locations:[{start:{line:56,column:14},end:{line:59,column:15}},{start:{line:56,column:14},end:{line:59,column:15}}],line:56},"3":{loc:{start:{line:67,column:14},end:{line:70,column:15}},type:"if",locations:[{start:{line:67,column:14},end:{line:70,column:15}},{start:{line:67,column:14},end:{line:70,column:15}}],line:67},"4":{loc:{start:{line:79,column:26},end:{line:79,column:54}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:34}},{start:{line:79,column:38},end:{line:79,column:54}}],line:79},"5":{loc:{start:{line:80,column:27},end:{line:80,column:57}},type:"binary-expr",locations:[{start:{line:80,column:27},end:{line:80,column:36}},{start:{line:80,column:40},end:{line:80,column:57}}],line:80}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0,0,0,0,0,0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"6b28079fe5ea3a5e2ad4532e0ebb78d6ed137605"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();var _interopRequireDefault=(cov_10l561xvfw.s[0]++,require("@babel/runtime/helpers/interopRequireDefault"));cov_10l561xvfw.s[1]++;Object.defineProperty(exports,"__esModule",{value:true});cov_10l561xvfw.s[2]++;exports["default"]=void 0;var _regenerator=(cov_10l561xvfw.s[3]++,_interopRequireDefault(require("@babel/runtime/regenerator")));var _asyncToGenerator2=(cov_10l561xvfw.s[4]++,_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")));var _dotenv=(cov_10l561xvfw.s[5]++,_interopRequireDefault(require("dotenv")));var _jsonwebtoken=(cov_10l561xvfw.s[6]++,_interopRequireDefault(require("jsonwebtoken")));var _DB=(cov_10l561xvfw.s[7]++,_interopRequireDefault(require("../models/DB")));var _token=(cov_10l561xvfw.s[8]++,_interopRequireDefault(require("../helpers/token")));cov_10l561xvfw.s[9]++;_dotenv["default"].config();var updateSingleRecords=(cov_10l561xvfw.s[10]++,{updateOneRecordsLocation:function(){cov_10l561xvfw.f[0]++;var _updateOneRecordsLocation=(cov_10l561xvfw.s[11]++,(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(req,res){cov_10l561xvfw.f[1]++;var receive_token_from_header,decoded_token_in_the_way_to_obtain_user_details,_req$body,latitude,longitude,recordId,data,readyDatas,updatedRecord;cov_10l561xvfw.s[12]++;return _regenerator["default"].wrap(function _callee$(_context){cov_10l561xvfw.f[2]++;cov_10l561xvfw.s[13]++;while(1){cov_10l561xvfw.s[14]++;switch(_context.prev=_context.next){case 0:cov_10l561xvfw.b[0][0]++;cov_10l561xvfw.s[15]++;receive_token_from_header=req.headers.authorization;cov_10l561xvfw.s[16]++;decoded_token_in_the_way_to_obtain_user_details=_jsonwebtoken["default"].verify(receive_token_from_header,process.env.SECRET_KEY);cov_10l561xvfw.s[17]++;_req$body=req.body,latitude=_req$body.latitude,longitude=_req$body.longitude;cov_10l561xvfw.s[18]++;recordId=parseInt(req.params.redflagid);cov_10l561xvfw.s[19]++;_context.next=6;cov_10l561xvfw.s[20]++;return _DB["default"].fetchOneRecord(recordId);case 6:cov_10l561xvfw.b[0][1]++;cov_10l561xvfw.s[21]++;data=_context.sent;cov_10l561xvfw.s[22]++;if(recordId){cov_10l561xvfw.b[1][0]++;cov_10l561xvfw.s[23]++;_context.next=9;cov_10l561xvfw.s[24]++;break;}else{cov_10l561xvfw.b[1][1]++;}cov_10l561xvfw.s[25]++;return _context.abrupt("return",res.status(404).json({status:404,message:"Hey ".concat(decoded_token_in_the_way_to_obtain_user_details.username," insert record id ")}));case 9:cov_10l561xvfw.b[0][2]++;cov_10l561xvfw.s[26]++;if(!(data.length===0)){cov_10l561xvfw.b[2][0]++;cov_10l561xvfw.s[27]++;_context.next=11;cov_10l561xvfw.s[28]++;break;}else{cov_10l561xvfw.b[2][1]++;}cov_10l561xvfw.s[29]++;return _context.abrupt("return",res.status(404).json({status:404,message:"Hey ".concat(decoded_token_in_the_way_to_obtain_user_details.username," this record with id ").concat(recordId," is not found ")}));case 11:cov_10l561xvfw.b[0][3]++;cov_10l561xvfw.s[30]++;if(!(data[0].userid!==decoded_token_in_the_way_to_obtain_user_details.id)){cov_10l561xvfw.b[3][0]++;cov_10l561xvfw.s[31]++;_context.next=13;cov_10l561xvfw.s[32]++;break;}else{cov_10l561xvfw.b[3][1]++;}cov_10l561xvfw.s[33]++;return _context.abrupt("return",res.status(401).json({status:401,message:"Hey ".concat(decoded_token_in_the_way_to_obtain_user_details.username," you are not owner of this record with id ").concat(recordId," ")}));case 13:cov_10l561xvfw.b[0][4]++;cov_10l561xvfw.s[34]++;readyDatas={latitude:(cov_10l561xvfw.b[4][0]++,latitude)||(cov_10l561xvfw.b[4][1]++,data[0].latitude),longitude:(cov_10l561xvfw.b[5][0]++,longitude)||(cov_10l561xvfw.b[5][1]++,data[0].longitude)};cov_10l561xvfw.s[35]++;_context.next=16;cov_10l561xvfw.s[36]++;return _DB["default"].updateLocation(readyDatas,parseInt(req.params.redflagid));case 16:cov_10l561xvfw.b[0][5]++;cov_10l561xvfw.s[37]++;updatedRecord=_context.sent;cov_10l561xvfw.s[38]++;return _context.abrupt("return",res.status(200).json({status:200,message:"Hey ".concat(decoded_token_in_the_way_to_obtain_user_details.username," !! Your record with id ").concat(recordId," was updated Successfully "),updateRecord:updatedRecord}));case 18:cov_10l561xvfw.b[0][6]++;case"end":cov_10l561xvfw.b[0][7]++;cov_10l561xvfw.s[39]++;return _context.stop();}}},_callee);})));function updateOneRecordsLocation(_x,_x2){cov_10l561xvfw.f[3]++;cov_10l561xvfw.s[40]++;return _updateOneRecordsLocation.apply(this,arguments);}cov_10l561xvfw.s[41]++;return updateOneRecordsLocation;}()});var _default=(cov_10l561xvfw.s[42]++,updateSingleRecords);cov_10l561xvfw.s[43]++;exports["default"]=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwZGF0ZUxvY2F0aW9uLmpzIl0sIm5hbWVzIjpbImRvdGVudiIsImNvbmZpZyIsInVwZGF0ZVNpbmdsZVJlY29yZHMiLCJ1cGRhdGVPbmVSZWNvcmRzTG9jYXRpb24iLCJyZXEiLCJyZXMiLCJyZWNlaXZlX3Rva2VuX2Zyb21faGVhZGVyIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJkZWNvZGVkX3Rva2VuX2luX3RoZV93YXlfdG9fb2J0YWluX3VzZXJfZGV0YWlscyIsImp3dCIsInZlcmlmeSIsInByb2Nlc3MiLCJlbnYiLCJTRUNSRVRfS0VZIiwiYm9keSIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwicmVjb3JkSWQiLCJwYXJzZUludCIsInBhcmFtcyIsInJlZGZsYWdpZCIsImltcERhdGEiLCJmZXRjaE9uZVJlY29yZCIsImRhdGEiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsInVzZXJuYW1lIiwibGVuZ3RoIiwidXNlcmlkIiwiaWQiLCJyZWFkeURhdGFzIiwidXBkYXRlTG9jYXRpb24iLCJ1cGRhdGVkUmVjb3JkIiwidXBkYXRlUmVjb3JkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUFBLG1CQUFPQyxNQUFQOztBQUNBLElBQU1DLG1CQUFtQixHQUFHO0FBQ3BCQyxFQUFBQSx3QkFEb0I7QUFBQTtBQUFBO0FBQUEsa0RBQ0tDLEdBREwsRUFDVUMsR0FEVjtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRWxCQyxjQUFBQSx5QkFGa0IsR0FFVUYsR0FBRyxDQUFDRyxPQUFKLENBQVlDLGFBRnRCO0FBR2xCQyxjQUFBQSwrQ0FIa0IsR0FHZ0NDLHlCQUFJQyxNQUFKLENBQVdMLHlCQUFYLEVBQXNDTSxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBbEQsQ0FIaEM7QUFBQSwwQkFJUVYsR0FBRyxDQUFDVyxJQUpaLEVBSWhCQyxRQUpnQixhQUloQkEsUUFKZ0IsRUFJTkMsU0FKTSxhQUlOQSxTQUpNO0FBTWxCQyxjQUFBQSxRQU5rQixHQU1QQyxRQUFRLENBQUNmLEdBQUcsQ0FBQ2dCLE1BQUosQ0FBV0MsU0FBWixDQU5EO0FBQUE7QUFBQSxxQkFPTEMsZUFBUUMsY0FBUixDQUF1QkwsUUFBdkIsQ0FQSzs7QUFBQTtBQU9sQk0sY0FBQUEsSUFQa0I7O0FBQUEsa0JBU25CTixRQVRtQjtBQUFBO0FBQUE7QUFBQTs7QUFBQSwrQ0FVZmIsR0FBRyxDQUFDb0IsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVELGdCQUFBQSxNQUFNLEVBQUUsR0FBVjtBQUFlRSxnQkFBQUEsT0FBTyxnQkFBU2xCLCtDQUErQyxDQUFDbUIsUUFBekQ7QUFBdEIsZUFBckIsQ0FWZTs7QUFBQTtBQUFBLG9CQWFwQkosSUFBSSxDQUFDSyxNQUFMLEtBQWdCLENBYkk7QUFBQTtBQUFBO0FBQUE7O0FBQUEsK0NBY2Z4QixHQUFHLENBQUNvQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRUQsZ0JBQUFBLE1BQU0sRUFBRSxHQUFWO0FBQWVFLGdCQUFBQSxPQUFPLGdCQUFTbEIsK0NBQStDLENBQUNtQixRQUF6RCxrQ0FBeUZWLFFBQXpGO0FBQXRCLGVBQXJCLENBZGU7O0FBQUE7QUFBQSxvQkFnQnBCTSxJQUFJLENBQUMsQ0FBRCxDQUFKLENBQVFNLE1BQVIsS0FBbUJyQiwrQ0FBK0MsQ0FBQ3NCLEVBaEIvQztBQUFBO0FBQUE7QUFBQTs7QUFBQSwrQ0FpQmYxQixHQUFHLENBQUNvQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRUQsZ0JBQUFBLE1BQU0sRUFBRSxHQUFWO0FBQWVFLGdCQUFBQSxPQUFPLGdCQUFTbEIsK0NBQStDLENBQUNtQixRQUF6RCx1REFBOEdWLFFBQTlHO0FBQXRCLGVBQXJCLENBakJlOztBQUFBO0FBbUJsQmMsY0FBQUEsVUFuQmtCLEdBbUJMO0FBQ2pCaEIsZ0JBQUFBLFFBQVEsRUFBRUEsUUFBUSxJQUFJUSxJQUFJLENBQUMsQ0FBRCxDQUFKLENBQVFSLFFBRGI7QUFFakJDLGdCQUFBQSxTQUFTLEVBQUVBLFNBQVMsSUFBSU8sSUFBSSxDQUFDLENBQUQsQ0FBSixDQUFRUDtBQUZmLGVBbkJLO0FBQUE7QUFBQSxxQkF1QklLLGVBQVFXLGNBQVIsQ0FBdUJELFVBQXZCLEVBQW1DYixRQUFRLENBQUNmLEdBQUcsQ0FBQ2dCLE1BQUosQ0FBV0MsU0FBWixDQUEzQyxDQXZCSjs7QUFBQTtBQXVCbEJhLGNBQUFBLGFBdkJrQjtBQUFBLCtDQXdCakI3QixHQUFHLENBQUNvQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRUQsZ0JBQUFBLE1BQU0sRUFBRSxHQUFWO0FBQWVFLGdCQUFBQSxPQUFPLGdCQUFTbEIsK0NBQStDLENBQUNtQixRQUF6RCxxQ0FBNEZWLFFBQTVGLCtCQUF0QjtBQUF3SmlCLGdCQUFBQSxZQUFZLEVBQUVEO0FBQXRLLGVBQXJCLENBeEJpQjs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBLENBQTVCO2VBMkJlaEMsbUIiLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxQb3NpdGl2b19Db21wdXRlclxcRGVza3RvcFxcYnJvYWRjYXN0LWFuZGVsYS1jeWNsZTEzXFxzZXJ2ZXJcXHYxXFxhcGlcXGNvbnRyb2xsZXJzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IGltcERhdGEgZnJvbSAnLi4vbW9kZWxzL0RCJztcbmltcG9ydCBpbXBEYXRhRnJvbVRva2VuIGZyb20gJy4uL2hlbHBlcnMvdG9rZW4nO1xuXG5kb3RlbnYuY29uZmlnKCk7XG5jb25zdCB1cGRhdGVTaW5nbGVSZWNvcmRzID0ge1xuICBhc3luYyB1cGRhdGVPbmVSZWNvcmRzTG9jYXRpb24ocmVxLCByZXMpIHtcbiAgICBjb25zdCByZWNlaXZlX3Rva2VuX2Zyb21faGVhZGVyID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcbiAgICBjb25zdCBkZWNvZGVkX3Rva2VuX2luX3RoZV93YXlfdG9fb2J0YWluX3VzZXJfZGV0YWlscyA9IGp3dC52ZXJpZnkocmVjZWl2ZV90b2tlbl9mcm9tX2hlYWRlciwgcHJvY2Vzcy5lbnYuU0VDUkVUX0tFWSk7XG4gICAgY29uc3QgeyBsYXRpdHVkZSwgbG9uZ2l0dWRlIH0gPSByZXEuYm9keTtcblxuICAgIGNvbnN0IHJlY29yZElkID0gcGFyc2VJbnQocmVxLnBhcmFtcy5yZWRmbGFnaWQpO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBpbXBEYXRhLmZldGNoT25lUmVjb3JkKHJlY29yZElkKTtcblxuICAgIGlmICghcmVjb3JkSWQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IHN0YXR1czogNDA0LCBtZXNzYWdlOiBgSGV5ICR7ZGVjb2RlZF90b2tlbl9pbl90aGVfd2F5X3RvX29idGFpbl91c2VyX2RldGFpbHMudXNlcm5hbWV9IGluc2VydCByZWNvcmQgaWQgYCB9KTtcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IHN0YXR1czogNDA0LCBtZXNzYWdlOiBgSGV5ICR7ZGVjb2RlZF90b2tlbl9pbl90aGVfd2F5X3RvX29idGFpbl91c2VyX2RldGFpbHMudXNlcm5hbWV9IHRoaXMgcmVjb3JkIHdpdGggaWQgJHtyZWNvcmRJZH0gaXMgbm90IGZvdW5kIGAgfSk7XG4gICAgfVxuICAgIGlmIChkYXRhWzBdLnVzZXJpZCAhPT0gZGVjb2RlZF90b2tlbl9pbl90aGVfd2F5X3RvX29idGFpbl91c2VyX2RldGFpbHMuaWQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IHN0YXR1czogNDAxLCBtZXNzYWdlOiBgSGV5ICR7ZGVjb2RlZF90b2tlbl9pbl90aGVfd2F5X3RvX29idGFpbl91c2VyX2RldGFpbHMudXNlcm5hbWV9IHlvdSBhcmUgbm90IG93bmVyIG9mIHRoaXMgcmVjb3JkIHdpdGggaWQgJHtyZWNvcmRJZH0gYCB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVhZHlEYXRhcyA9IHtcbiAgICAgIGxhdGl0dWRlOiBsYXRpdHVkZSB8fCBkYXRhWzBdLmxhdGl0dWRlLFxuICAgICAgbG9uZ2l0dWRlOiBsb25naXR1ZGUgfHwgZGF0YVswXS5sb25naXR1ZGUsXG4gICAgfTtcbiAgICBjb25zdCB1cGRhdGVkUmVjb3JkID0gYXdhaXQgaW1wRGF0YS51cGRhdGVMb2NhdGlvbihyZWFkeURhdGFzLCBwYXJzZUludChyZXEucGFyYW1zLnJlZGZsYWdpZCkpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHN0YXR1czogMjAwLCBtZXNzYWdlOiBgSGV5ICR7ZGVjb2RlZF90b2tlbl9pbl90aGVfd2F5X3RvX29idGFpbl91c2VyX2RldGFpbHMudXNlcm5hbWV9ICEhIFlvdXIgcmVjb3JkIHdpdGggaWQgJHtyZWNvcmRJZH0gd2FzIHVwZGF0ZWQgU3VjY2Vzc2Z1bGx5IGAsIHVwZGF0ZVJlY29yZDogdXBkYXRlZFJlY29yZCB9KTtcbiAgfSxcbn07XG5leHBvcnQgZGVmYXVsdCB1cGRhdGVTaW5nbGVSZWNvcmRzO1xuIl19