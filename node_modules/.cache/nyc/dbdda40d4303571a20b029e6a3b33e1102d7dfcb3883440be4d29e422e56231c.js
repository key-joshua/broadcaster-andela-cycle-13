"use strict";var cov_23e9ntqr0r=function(){var path="C:\\Users\\Positivo_Computer\\Desktop\\broadcast-andela-cycle13\\server\\v1\\api\\controllers\\createRecord.js";var hash="23f2096bb466321715ad2f68605ca6edf1e70ce4";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Positivo_Computer\\Desktop\\broadcast-andela-cycle13\\server\\v1\\api\\controllers\\createRecord.js",statementMap:{"0":{start:{line:3,column:29},end:{line:3,column:84}},"1":{start:{line:5,column:0},end:{line:7,column:3}},"2":{start:{line:8,column:0},end:{line:8,column:28}},"3":{start:{line:10,column:14},end:{line:10,column:55}},"4":{start:{line:12,column:20},end:{line:12,column:67}},"5":{start:{line:14,column:10},end:{line:14,column:57}},"6":{start:{line:16,column:20},end:{line:16,column:78}},"7":{start:{line:18,column:0},end:{line:18,column:28}},"8":{start:{line:20,column:26},end:{line:97,column:1}},"9":{start:{line:22,column:36},end:{line:22,column:61}},"10":{start:{line:24,column:58},end:{line:24,column:140}},"11":{start:{line:26,column:20},end:{line:26,column:28}},"12":{start:{line:27,column:20},end:{line:27,column:39}},"13":{start:{line:28,column:16},end:{line:28,column:31}},"14":{start:{line:29,column:15},end:{line:29,column:29}},"15":{start:{line:30,column:19},end:{line:30,column:37}},"16":{start:{line:31,column:20},end:{line:31,column:39}},"17":{start:{line:32,column:18},end:{line:32,column:35}},"18":{start:{line:34,column:18},end:{line:34,column:73}},"19":{start:{line:36,column:4},end:{line:39,column:7}},"20":{start:{line:36,column:17},end:{line:39,column:7}},"21":{start:{line:41,column:17},end:{line:41,column:70}},"22":{start:{line:43,column:4},end:{line:46,column:7}},"23":{start:{line:43,column:16},end:{line:46,column:7}},"24":{start:{line:48,column:20},end:{line:48,column:79}},"25":{start:{line:50,column:4},end:{line:53,column:7}},"26":{start:{line:50,column:19},end:{line:53,column:7}},"27":{start:{line:57,column:4},end:{line:73,column:5}},"28":{start:{line:58,column:6},end:{line:64,column:7}},"29":{start:{line:59,column:23},end:{line:62,column:10}},"30":{start:{line:60,column:21},end:{line:60,column:30}},"31":{start:{line:61,column:10},end:{line:61,column:22}},"32":{start:{line:63,column:8},end:{line:63,column:36}},"33":{start:{line:66,column:6},end:{line:72,column:7}},"34":{start:{line:67,column:23},end:{line:70,column:10}},"35":{start:{line:68,column:21},end:{line:68,column:31}},"36":{start:{line:69,column:10},end:{line:69,column:22}},"37":{start:{line:71,column:8},end:{line:71,column:36}},"38":{start:{line:75,column:21},end:{line:85,column:5}},"39":{start:{line:87,column:4},end:{line:87,column:39}},"40":{start:{line:89,column:15},end:{line:89,column:71}},"41":{start:{line:91,column:4},end:{line:95,column:7}},"42":{start:{line:98,column:15},end:{line:98,column:34}},"43":{start:{line:99,column:0},end:{line:99,column:30}}},fnMap:{"0":{name:"createOneRecords",decl:{start:{line:21,column:29},end:{line:21,column:45}},loc:{start:{line:21,column:56},end:{line:96,column:3}},line:21},"1":{name:"(anonymous_1)",decl:{start:{line:59,column:44},end:{line:59,column:45}},loc:{start:{line:59,column:60},end:{line:62,column:9}},line:59},"2":{name:"(anonymous_2)",decl:{start:{line:67,column:44},end:{line:67,column:45}},loc:{start:{line:67,column:61},end:{line:70,column:9}},line:67}},branchMap:{"0":{loc:{start:{line:36,column:4},end:{line:39,column:7}},type:"if",locations:[{start:{line:36,column:4},end:{line:39,column:7}},{start:{line:36,column:4},end:{line:39,column:7}}],line:36},"1":{loc:{start:{line:43,column:4},end:{line:46,column:7}},type:"if",locations:[{start:{line:43,column:4},end:{line:46,column:7}},{start:{line:43,column:4},end:{line:46,column:7}}],line:43},"2":{loc:{start:{line:50,column:4},end:{line:53,column:7}},type:"if",locations:[{start:{line:50,column:4},end:{line:53,column:7}},{start:{line:50,column:4},end:{line:53,column:7}}],line:50},"3":{loc:{start:{line:57,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:73,column:5}},{start:{line:57,column:4},end:{line:73,column:5}}],line:57},"4":{loc:{start:{line:58,column:6},end:{line:64,column:7}},type:"if",locations:[{start:{line:58,column:6},end:{line:64,column:7}},{start:{line:58,column:6},end:{line:64,column:7}}],line:58},"5":{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:66,column:6},end:{line:72,column:7}}],line:66},"6":{loc:{start:{line:77,column:17},end:{line:77,column:86}},type:"binary-expr",locations:[{start:{line:77,column:17},end:{line:77,column:26}},{start:{line:77,column:30},end:{line:77,column:86}}],line:77}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"23f2096bb466321715ad2f68605ca6edf1e70ce4"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();var _interopRequireDefault=(cov_23e9ntqr0r.s[0]++,require("@babel/runtime/helpers/interopRequireDefault"));cov_23e9ntqr0r.s[1]++;Object.defineProperty(exports,"__esModule",{value:true});cov_23e9ntqr0r.s[2]++;exports["default"]=void 0;var _dotenv=(cov_23e9ntqr0r.s[3]++,_interopRequireDefault(require("dotenv")));var _jsonwebtoken=(cov_23e9ntqr0r.s[4]++,_interopRequireDefault(require("jsonwebtoken")));var _DB=(cov_23e9ntqr0r.s[5]++,_interopRequireDefault(require("../models/DB")));var _createHelper=(cov_23e9ntqr0r.s[6]++,_interopRequireDefault(require("../helpers/createHelper")));cov_23e9ntqr0r.s[7]++;_dotenv["default"].config();var createSingleRecords=(cov_23e9ntqr0r.s[8]++,{createOneRecords:function createOneRecords(req,res){cov_23e9ntqr0r.f[0]++;var receive_token_from_header=(cov_23e9ntqr0r.s[9]++,req.headers.authorization);var decoded_token_in_the_way_to_obtain_user_details=(cov_23e9ntqr0r.s[10]++,_jsonwebtoken["default"].verify(receive_token_from_header,process.env.SECRET_KEY));var _req$body=(cov_23e9ntqr0r.s[11]++,req.body),createdBy=(cov_23e9ntqr0r.s[12]++,_req$body.createdBy),title=(cov_23e9ntqr0r.s[13]++,_req$body.title),type=(cov_23e9ntqr0r.s[14]++,_req$body.type),latitude=(cov_23e9ntqr0r.s[15]++,_req$body.latitude),longitude=(cov_23e9ntqr0r.s[16]++,_req$body.longitude),comment=(cov_23e9ntqr0r.s[17]++,_req$body.comment);var ckTitle=(cov_23e9ntqr0r.s[18]++,_createHelper["default"].check_title_if_is_empty(title));cov_23e9ntqr0r.s[19]++;if(ckTitle){cov_23e9ntqr0r.b[0][0]++;cov_23e9ntqr0r.s[20]++;return res.status(400).json({status:400,message:"Hey ".concat(decoded_token_in_the_way_to_obtain_user_details.username," record title is needed !!")});}else{cov_23e9ntqr0r.b[0][1]++;}var ckType=(cov_23e9ntqr0r.s[21]++,_createHelper["default"].check_type_if_is_empty(type));cov_23e9ntqr0r.s[22]++;if(ckType){cov_23e9ntqr0r.b[1][0]++;cov_23e9ntqr0r.s[23]++;return res.status(400).json({status:400,message:"Hey ".concat(decoded_token_in_the_way_to_obtain_user_details.username," record type is needed !!")});}else{cov_23e9ntqr0r.b[1][1]++;}var ckComment=(cov_23e9ntqr0r.s[24]++,_createHelper["default"].check_comment_if_is_empty(comment));cov_23e9ntqr0r.s[25]++;if(ckComment){cov_23e9ntqr0r.b[2][0]++;cov_23e9ntqr0r.s[26]++;return res.status(400).json({status:400,message:"Hey ".concat(decoded_token_in_the_way_to_obtain_user_details.username," record comment is needed !!")});}else{cov_23e9ntqr0r.b[2][1]++;}var imgs;var vids;cov_23e9ntqr0r.s[27]++;if(req.files){cov_23e9ntqr0r.b[3][0]++;cov_23e9ntqr0r.s[28]++;if(req.files.images){cov_23e9ntqr0r.b[4][0]++;var imgsPath=(cov_23e9ntqr0r.s[29]++,req.files.images.map(function(_ref){cov_23e9ntqr0r.f[1]++;var path=(cov_23e9ntqr0r.s[30]++,_ref.path);cov_23e9ntqr0r.s[31]++;return path;}));cov_23e9ntqr0r.s[32]++;imgs=imgsPath.join(',  ');}else{cov_23e9ntqr0r.b[4][1]++;}cov_23e9ntqr0r.s[33]++;if(req.files.videos){cov_23e9ntqr0r.b[5][0]++;var vidsPath=(cov_23e9ntqr0r.s[34]++,req.files.videos.map(function(_ref2){cov_23e9ntqr0r.f[2]++;var path=(cov_23e9ntqr0r.s[35]++,_ref2.path);cov_23e9ntqr0r.s[36]++;return path;}));cov_23e9ntqr0r.s[37]++;vids=vidsPath.join(',  ');}else{cov_23e9ntqr0r.b[5][1]++;}}else{cov_23e9ntqr0r.b[3][1]++;}var readyDatas=(cov_23e9ntqr0r.s[38]++,{userId:decoded_token_in_the_way_to_obtain_user_details.id,createdBy:(cov_23e9ntqr0r.b[6][0]++,createdBy)||(cov_23e9ntqr0r.b[6][1]++,decoded_token_in_the_way_to_obtain_user_details.username),title:title,type:type,latitude:latitude,longitude:longitude,images:imgs,videos:vids,comment:comment});cov_23e9ntqr0r.s[39]++;_DB["default"].createe(readyDatas);var data=(cov_23e9ntqr0r.s[40]++,_DB["default"].fetchLastCreatedRecord(readyDatas.userId));cov_23e9ntqr0r.s[41]++;res.status(201).json({status:201,message:"Hy ".concat(decoded_token_in_the_way_to_obtain_user_details.username," your record has created successfully on ").concat(_createHelper["default"].created),record:data});}});var _default=(cov_23e9ntqr0r.s[42]++,createSingleRecords);cov_23e9ntqr0r.s[43]++;exports["default"]=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0ZVJlY29yZC5qcyJdLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJjcmVhdGVTaW5nbGVSZWNvcmRzIiwiY3JlYXRlT25lUmVjb3JkcyIsInJlcSIsInJlcyIsInJlY2VpdmVfdG9rZW5fZnJvbV9oZWFkZXIiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImRlY29kZWRfdG9rZW5faW5fdGhlX3dheV90b19vYnRhaW5fdXNlcl9kZXRhaWxzIiwiand0IiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIlNFQ1JFVF9LRVkiLCJib2R5IiwiY3JlYXRlZEJ5IiwidGl0bGUiLCJ0eXBlIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJjb21tZW50IiwiY2tUaXRsZSIsImltcGhlbHAiLCJjaGVja190aXRsZV9pZl9pc19lbXB0eSIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwidXNlcm5hbWUiLCJja1R5cGUiLCJjaGVja190eXBlX2lmX2lzX2VtcHR5IiwiY2tDb21tZW50IiwiY2hlY2tfY29tbWVudF9pZl9pc19lbXB0eSIsImltZ3MiLCJ2aWRzIiwiZmlsZXMiLCJpbWFnZXMiLCJpbWdzUGF0aCIsIm1hcCIsInBhdGgiLCJqb2luIiwidmlkZW9zIiwidmlkc1BhdGgiLCJyZWFkeURhdGFzIiwidXNlcklkIiwiaWQiLCJpbXBEYXRhIiwiY3JlYXRlZSIsImRhdGEiLCJmZXRjaExhc3RDcmVhdGVkUmVjb3JkIiwiY3JlYXRlZCIsInJlY29yZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUFBLG1CQUFPQyxNQUFQOztBQUNBLElBQU1DLG1CQUFtQixHQUFHO0FBQzFCQyxFQUFBQSxnQkFEMEIsNEJBQ1RDLEdBRFMsRUFDSkMsR0FESSxFQUNDO0FBQ3pCLFFBQU1DLHlCQUF5QixHQUFHRixHQUFHLENBQUNHLE9BQUosQ0FBWUMsYUFBOUM7O0FBQ0EsUUFBTUMsK0NBQStDLEdBQUdDLHlCQUFJQyxNQUFK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V0F5QixtQkFBUUMsT0FBUixDQUFnQkosVUFBaEI7O0FBQ0EsUUFBTUssSUFBSSxHQUFHRixlQUFRRyxzQkFBUixDQUErQk4sVUFBVSxDQUFDQyxNQUExQyxDQUFiOztBQUNBdkMsSUFBQUEsR0FBRyxDQUFDb0IsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVELE1BQUFBLE1BQU0sRUFBRSxHQUFWO0FBQWVFLE1BQUFBLE9BQU8sZUFBUWxCLCtDQUErQyxDQUFDbUIsUUFBeEQsc0RBQTRHTCx5QkFBUTJCLE9BQXBILENBQXRCO0FBQXFKQyxNQUFBQSxNQUFNLEVBQUVIO0FBQTdKLEtBQXJCO0FBQ0Q7QUExQ3lCLENBQTVCO2VBNENlOUMsbUIiLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxQb3NpdGl2b19Db21wdXRlclxcRGVza3RvcFxcYnJvYWRjYXN0LWFuZGVsYS1jeWNsZTEzXFxzZXJ2ZXJcXHYxXFxhcGlcXGNvbnRyb2xsZXJzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IGltcERhdGEgZnJvbSAnLi4vbW9kZWxzL0RCJztcbmltcG9ydCBpbXBoZWxwIGZyb20gJy4uL2hlbHBlcnMvY3JlYXRlSGVscGVyJztcblxuZG90ZW52LmNvbmZpZygpO1xuY29uc3QgY3JlYXRlU2luZ2xlUmVjb3JkcyA9IHtcbiAgY3JlYXRlT25lUmVjb3JkcyhyZXEsIHJlcykge1xuICAgIGNvbnN0IHJlY2VpdmVfdG9rZW5fZnJvbV9oZWFkZXIgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xuICAgIGNvbnN0IGRlY29kZWRfdG9rZW5faW5fdGhlX3dheV90b19vYnRhaW5fdXNlcl9kZXRhaWxzID0gand0LnZlcmlmeShyZWNlaXZlX3Rva2VuX2Zyb21faGVhZGVyLCBwcm9jZXNzLmVudi5TRUNSRVRfS0VZKTtcbiAgICBjb25zdCB7IGNyZWF0ZWRCeSwgdGl0bGUsIHR5cGUsIGxhdGl0dWRlLCBsb25naXR1ZGUsIGNvbW1lbnQgfSA9IHJlcS5ib2R5O1xuXG4gICAgY29uc3QgY2tUaXRsZSA9IGltcGhlbHAuY2hlY2tfdGl0bGVfaWZfaXNfZW1wdHkodGl0bGUpO1xuICAgIGlmIChja1RpdGxlKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdGF0dXM6IDQwMCwgbWVzc2FnZTogYEhleSAke2RlY29kZWRfdG9rZW5faW5fdGhlX3dheV90b19vYnRhaW5fdXNlcl9kZXRhaWxzLnVzZXJuYW1lfSByZWNvcmQgdGl0bGUgaXMgbmVlZGVkICEhYCB9KTtcblxuICAgIGNvbnN0IGNrVHlwZSA9IGltcGhlbHAuY2hlY2tfdHlwZV9pZl9pc19lbXB0eSh0eXBlKTtcbiAgICBpZiAoY2tUeXBlKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdGF0dXM6IDQwMCwgbWVzc2FnZTogYEhleSAke2RlY29kZWRfdG9rZW5faW5fdGhlX3dheV90b19vYnRhaW5fdXNlcl9kZXRhaWxzLnVzZXJuYW1lfSByZWNvcmQgdHlwZSBpcyBuZWVkZWQgISFgIH0pO1xuXG4gICAgY29uc3QgY2tDb21tZW50ID0gaW1waGVscC5jaGVja19jb21tZW50X2lmX2lzX2VtcHR5KGNvbW1lbnQpO1xuICAgIGlmIChja0NvbW1lbnQpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN0YXR1czogNDAwLCBtZXNzYWdlOiBgSGV5ICR7ZGVjb2RlZF90b2tlbl9pbl90aGVfd2F5X3RvX29idGFpbl91c2VyX2RldGFpbHMudXNlcm5hbWV9IHJlY29yZCBjb21tZW50IGlzIG5lZWRlZCAhIWAgfSk7XG5cbiAgICBsZXQgaW1ncztcbiAgICBsZXQgdmlkcztcbiAgICBpZiAocmVxLmZpbGVzKSB7XG4gICAgICBpZiAocmVxLmZpbGVzLmltYWdlcykge1xuICAgICAgICBjb25zdCBpbWdzUGF0aCA9IHJlcS5maWxlcy5pbWFnZXMubWFwKCh7IHBhdGggfSkgPT4gcGF0aCk7XG4gICAgICAgIGltZ3MgPSBpbWdzUGF0aC5qb2luKCcsICAnKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXEuZmlsZXMudmlkZW9zKSB7XG4gICAgICAgIGNvbnN0IHZpZHNQYXRoID0gcmVxLmZpbGVzLnZpZGVvcy5tYXAoKHsgcGF0aCB9KSA9PiBwYXRoKTtcbiAgICAgICAgdmlkcyA9IHZpZHNQYXRoLmpvaW4oJywgICcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHJlYWR5RGF0YXMgPSB7XG4gICAgICB1c2VySWQ6IGRlY29kZWRfdG9rZW5faW5fdGhlX3dheV90b19vYnRhaW5fdXNlcl9kZXRhaWxzLmlkLFxuICAgICAgY3JlYXRlZEJ5OiBjcmVhdGVkQnkgfHwgZGVjb2RlZF90b2tlbl9pbl90aGVfd2F5X3RvX29idGFpbl91c2VyX2RldGFpbHMudXNlcm5hbWUsXG4gICAgICB0aXRsZTogdGl0bGUsXG4gICAgICB0eXBlOiB0eXBlLFxuICAgICAgbGF0aXR1ZGU6IGxhdGl0dWRlLFxuICAgICAgbG9uZ2l0dWRlOiBsb25naXR1ZGUsXG4gICAgICBpbWFnZXM6IGltZ3MsXG4gICAgICB2aWRlb3M6IHZpZHMsXG4gICAgICBjb21tZW50OiBjb21tZW50LFxuICAgIH07XG4gICAgaW1wRGF0YS5jcmVhdGVlKHJlYWR5RGF0YXMpO1xuICAgIGNvbnN0IGRhdGEgPSBpbXBEYXRhLmZldGNoTGFzdENyZWF0ZWRSZWNvcmQocmVhZHlEYXRhcy51c2VySWQpO1xuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgc3RhdHVzOiAyMDEsIG1lc3NhZ2U6IGBIeSAke2RlY29kZWRfdG9rZW5faW5fdGhlX3dheV90b19vYnRhaW5fdXNlcl9kZXRhaWxzLnVzZXJuYW1lfSB5b3VyIHJlY29yZCBoYXMgY3JlYXRlZCBzdWNjZXNzZnVsbHkgb24gJHtpbXBoZWxwLmNyZWF0ZWR9YCwgcmVjb3JkOiBkYXRhIH0pO1xuICB9LFxufTtcbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVNpbmdsZVJlY29yZHM7XG4iXX0=