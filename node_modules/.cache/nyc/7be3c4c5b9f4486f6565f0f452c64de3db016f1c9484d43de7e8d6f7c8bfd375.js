"use strict";var cov_23e9ntqr0r=function(){var path="C:\\Users\\Positivo_Computer\\Desktop\\broadcast-andela-cycle13\\server\\v1\\api\\controllers\\createRecord.js";var hash="d72a47a3571655ccd41dd4d2f5e8b55a16dc3666";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Positivo_Computer\\Desktop\\broadcast-andela-cycle13\\server\\v1\\api\\controllers\\createRecord.js",statementMap:{"0":{start:{line:3,column:29},end:{line:3,column:84}},"1":{start:{line:5,column:0},end:{line:7,column:3}},"2":{start:{line:8,column:0},end:{line:8,column:28}},"3":{start:{line:10,column:14},end:{line:10,column:55}},"4":{start:{line:12,column:20},end:{line:12,column:67}},"5":{start:{line:14,column:10},end:{line:14,column:57}},"6":{start:{line:16,column:20},end:{line:16,column:78}},"7":{start:{line:18,column:0},end:{line:18,column:28}},"8":{start:{line:20,column:26},end:{line:146,column:1}},"9":{start:{line:22,column:36},end:{line:22,column:61}},"10":{start:{line:24,column:58},end:{line:24,column:140}},"11":{start:{line:26,column:20},end:{line:26,column:28}},"12":{start:{line:27,column:16},end:{line:27,column:31}},"13":{start:{line:28,column:15},end:{line:28,column:29}},"14":{start:{line:29,column:19},end:{line:29,column:37}},"15":{start:{line:30,column:20},end:{line:30,column:39}},"16":{start:{line:31,column:17},end:{line:31,column:33}},"17":{start:{line:32,column:17},end:{line:32,column:33}},"18":{start:{line:33,column:18},end:{line:33,column:35}},"19":{start:{line:35,column:18},end:{line:35,column:73}},"20":{start:{line:37,column:4},end:{line:40,column:7}},"21":{start:{line:37,column:17},end:{line:40,column:7}},"22":{start:{line:42,column:17},end:{line:42,column:70}},"23":{start:{line:44,column:4},end:{line:47,column:7}},"24":{start:{line:44,column:16},end:{line:47,column:7}},"25":{start:{line:49,column:20},end:{line:49,column:79}},"26":{start:{line:51,column:4},end:{line:54,column:7}},"27":{start:{line:51,column:19},end:{line:54,column:7}},"28":{start:{line:56,column:4},end:{line:144,column:5}},"29":{start:{line:57,column:23},end:{line:67,column:7}},"30":{start:{line:69,column:6},end:{line:69,column:41}},"31":{start:{line:71,column:17},end:{line:71,column:73}},"32":{start:{line:73,column:6},end:{line:77,column:9}},"33":{start:{line:78,column:11},end:{line:144,column:5}},"34":{start:{line:79,column:24},end:{line:89,column:7}},"35":{start:{line:91,column:6},end:{line:91,column:42}},"36":{start:{line:93,column:18},end:{line:93,column:75}},"37":{start:{line:95,column:6},end:{line:99,column:9}},"38":{start:{line:100,column:11},end:{line:144,column:5}},"39":{start:{line:101,column:25},end:{line:111,column:7}},"40":{start:{line:113,column:6},end:{line:113,column:43}},"41":{start:{line:115,column:19},end:{line:115,column:77}},"42":{start:{line:117,column:6},end:{line:121,column:9}},"43":{start:{line:123,column:25},end:{line:133,column:7}},"44":{start:{line:135,column:6},end:{line:135,column:43}},"45":{start:{line:137,column:19},end:{line:137,column:77}},"46":{start:{line:139,column:6},end:{line:143,column:9}},"47":{start:{line:147,column:15},end:{line:147,column:34}},"48":{start:{line:148,column:0},end:{line:148,column:30}}},fnMap:{"0":{name:"createOneRecords",decl:{start:{line:21,column:29},end:{line:21,column:45}},loc:{start:{line:21,column:56},end:{line:145,column:3}},line:21}},branchMap:{"0":{loc:{start:{line:37,column:4},end:{line:40,column:7}},type:"if",locations:[{start:{line:37,column:4},end:{line:40,column:7}},{start:{line:37,column:4},end:{line:40,column:7}}],line:37},"1":{loc:{start:{line:44,column:4},end:{line:47,column:7}},type:"if",locations:[{start:{line:44,column:4},end:{line:47,column:7}},{start:{line:44,column:4},end:{line:47,column:7}}],line:44},"2":{loc:{start:{line:51,column:4},end:{line:54,column:7}},type:"if",locations:[{start:{line:51,column:4},end:{line:54,column:7}},{start:{line:51,column:4},end:{line:54,column:7}}],line:51},"3":{loc:{start:{line:56,column:4},end:{line:144,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:144,column:5}},{start:{line:56,column:4},end:{line:144,column:5}}],line:56},"4":{loc:{start:{line:56,column:8},end:{line:56,column:46}},type:"binary-expr",locations:[{start:{line:56,column:8},end:{line:56,column:25}},{start:{line:56,column:29},end:{line:56,column:46}}],line:56},"5":{loc:{start:{line:78,column:11},end:{line:144,column:5}},type:"if",locations:[{start:{line:78,column:11},end:{line:144,column:5}},{start:{line:78,column:11},end:{line:144,column:5}}],line:78},"6":{loc:{start:{line:100,column:11},end:{line:144,column:5}},type:"if",locations:[{start:{line:100,column:11},end:{line:144,column:5}},{start:{line:100,column:11},end:{line:144,column:5}}],line:100}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0},f:{"0":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"d72a47a3571655ccd41dd4d2f5e8b55a16dc3666"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();var _interopRequireDefault=(cov_23e9ntqr0r.s[0]++,require("@babel/runtime/helpers/interopRequireDefault"));cov_23e9ntqr0r.s[1]++;Object.defineProperty(exports,"__esModule",{value:true});cov_23e9ntqr0r.s[2]++;exports["default"]=void 0;var _dotenv=(cov_23e9ntqr0r.s[3]++,_interopRequireDefault(require("dotenv")));var _jsonwebtoken=(cov_23e9ntqr0r.s[4]++,_interopRequireDefault(require("jsonwebtoken")));var _DB=(cov_23e9ntqr0r.s[5]++,_interopRequireDefault(require("../models/DB")));var _createHelper=(cov_23e9ntqr0r.s[6]++,_interopRequireDefault(require("../helpers/createHelper")));cov_23e9ntqr0r.s[7]++;_dotenv["default"].config();var createSingleRecords=(cov_23e9ntqr0r.s[8]++,{createOneRecords:function createOneRecords(req,res){cov_23e9ntqr0r.f[0]++;var receive_token_from_header=(cov_23e9ntqr0r.s[9]++,req.headers.authorization);var decoded_token_in_the_way_to_obtain_user_details=(cov_23e9ntqr0r.s[10]++,_jsonwebtoken["default"].verify(receive_token_from_header,process.env.SECRET_KEY));var _req$body=(cov_23e9ntqr0r.s[11]++,req.body),title=(cov_23e9ntqr0r.s[12]++,_req$body.title),type=(cov_23e9ntqr0r.s[13]++,_req$body.type),latitude=(cov_23e9ntqr0r.s[14]++,_req$body.latitude),longitude=(cov_23e9ntqr0r.s[15]++,_req$body.longitude),images=(cov_23e9ntqr0r.s[16]++,_req$body.images),videos=(cov_23e9ntqr0r.s[17]++,_req$body.videos),comment=(cov_23e9ntqr0r.s[18]++,_req$body.comment);var ckTitle=(cov_23e9ntqr0r.s[19]++,_createHelper["default"].check_title_if_is_empty(title));cov_23e9ntqr0r.s[20]++;if(ckTitle){cov_23e9ntqr0r.b[0][0]++;cov_23e9ntqr0r.s[21]++;return res.status(400).json({status:400,message:"Hey ".concat(decoded_token_in_the_way_to_obtain_user_details.username," record title is needed !!")});}else{cov_23e9ntqr0r.b[0][1]++;}var ckType=(cov_23e9ntqr0r.s[22]++,_createHelper["default"].check_type_if_is_empty(type));cov_23e9ntqr0r.s[23]++;if(ckType){cov_23e9ntqr0r.b[1][0]++;cov_23e9ntqr0r.s[24]++;return res.status(400).json({status:400,message:"Hey ".concat(decoded_token_in_the_way_to_obtain_user_details.username," record type is needed !!")});}else{cov_23e9ntqr0r.b[1][1]++;}var ckComment=(cov_23e9ntqr0r.s[25]++,_createHelper["default"].check_comment_if_is_empty(comment));cov_23e9ntqr0r.s[26]++;if(ckComment){cov_23e9ntqr0r.b[2][0]++;cov_23e9ntqr0r.s[27]++;return res.status(400).json({status:400,message:"Hey ".concat(decoded_token_in_the_way_to_obtain_user_details.username," record comment is needed !!")});}else{cov_23e9ntqr0r.b[2][1]++;}cov_23e9ntqr0r.s[28]++;if((cov_23e9ntqr0r.b[4][0]++,!req.files.images)&&(cov_23e9ntqr0r.b[4][1]++,!req.files.videos)){cov_23e9ntqr0r.b[3][0]++;var readyDatas=(cov_23e9ntqr0r.s[29]++,{userId:decoded_token_in_the_way_to_obtain_user_details.id,createdBy:decoded_token_in_the_way_to_obtain_user_details.username,title:title,type:type,latitude:latitude,longitude:longitude,images:'none',videos:'none',comment:comment});cov_23e9ntqr0r.s[30]++;_DB["default"].createe(readyDatas);var data=(cov_23e9ntqr0r.s[31]++,_DB["default"].fetchLastCreatedRecord(readyDatas.userId));cov_23e9ntqr0r.s[32]++;res.status(201).json({status:201,message:"Hy ".concat(decoded_token_in_the_way_to_obtain_user_details.username," your record has created successfully on ").concat(_createHelper["default"].created),record:data});}else{cov_23e9ntqr0r.b[3][1]++;cov_23e9ntqr0r.s[33]++;if(!req.files.images){cov_23e9ntqr0r.b[5][0]++;var _readyDatas=(cov_23e9ntqr0r.s[34]++,{userId:decoded_token_in_the_way_to_obtain_user_details.id,createdBy:decoded_token_in_the_way_to_obtain_user_details.username,title:title,type:type,latitude:latitude,longitude:longitude,images:'none',videos:req.files.videos[0].path,comment:comment});cov_23e9ntqr0r.s[35]++;_DB["default"].createe(_readyDatas);var _data=(cov_23e9ntqr0r.s[36]++,_DB["default"].fetchLastCreatedRecord(_readyDatas.userId));cov_23e9ntqr0r.s[37]++;res.status(201).json({status:201,message:"Hy ".concat(decoded_token_in_the_way_to_obtain_user_details.username," your record has created successfully on ").concat(_createHelper["default"].created),record:_data});}else{cov_23e9ntqr0r.b[5][1]++;cov_23e9ntqr0r.s[38]++;if(!req.files.videos){cov_23e9ntqr0r.b[6][0]++;var _readyDatas2=(cov_23e9ntqr0r.s[39]++,{userId:decoded_token_in_the_way_to_obtain_user_details.id,createdBy:decoded_token_in_the_way_to_obtain_user_details.username,title:title,type:type,latitude:latitude,longitude:longitude,images:req.files.images[0].path,videos:'none',comment:comment});cov_23e9ntqr0r.s[40]++;_DB["default"].createe(_readyDatas2);var _data2=(cov_23e9ntqr0r.s[41]++,_DB["default"].fetchLastCreatedRecord(_readyDatas2.userId));cov_23e9ntqr0r.s[42]++;res.status(201).json({status:201,message:"Hy ".concat(decoded_token_in_the_way_to_obtain_user_details.username," your record has created successfully on ").concat(_createHelper["default"].created),record:_data2});}else{cov_23e9ntqr0r.b[6][1]++;var _readyDatas3=(cov_23e9ntqr0r.s[43]++,{userId:decoded_token_in_the_way_to_obtain_user_details.id,createdBy:decoded_token_in_the_way_to_obtain_user_details.username,title:title,type:type,latitude:latitude,longitude:longitude,images:req.files.images[0].path,videos:req.files.videos[0].path,comment:comment});cov_23e9ntqr0r.s[44]++;_DB["default"].createe(_readyDatas3);var _data3=(cov_23e9ntqr0r.s[45]++,_DB["default"].fetchLastCreatedRecord(_readyDatas3.userId));cov_23e9ntqr0r.s[46]++;res.status(201).json({status:201,message:"Hy ".concat(decoded_token_in_the_way_to_obtain_user_details.username," your record has created successfully on ").concat(_createHelper["default"].created),record:_data3});}}}}});var _default=(cov_23e9ntqr0r.s[47]++,createSingleRecords);cov_23e9ntqr0r.s[48]++;exports["default"]=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0ZVJlY29yZC5qcyJdLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJjcmVhdGVTaW5nbGVSZWNvcmRzIiwiY3JlYXRlT25lUmVjb3JkcyIsInJlcSIsInJlcyIsInJlY2VpdmVfdG9rZW5fZnJvbV9oZWFkZXIiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImRlY29kZWRfdG9rZW5faW5fdGhlX3dheV90b19vYnRhaW5fdXNlcl9kZXRhaWxzIiwiand0IiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIlNFQ1JFVF9LRVkiLCJib2R5IiwidGl0bGUiLCJ0eXBlIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJpbWFnZXMiLCJ2aWRlb3MiLCJjb21tZW50IiwiY2tUaXRsZSIsImltcGhlbHAiLCJjaGVja190aXRsZV9pZl9pc19lbXB0eSIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwidXNlcm5hbWUiLCJja1R5cGUiLCJjaGVja190eXBlX2lmX2lzX2VtcHR5IiwiY2tDb21tZW50IiwiY2hlY2tfY29tbWVudF9pZl9pc19lbXB0eSIsImZpbGVzIiwicmVhZHlEYXRhcyIsInVzZXJJZCIsImlkIiwiY3JlYXRlZEJ5IiwiaW1wRGF0YSIsImNyZWF0ZWUiLCJkYXRhIiwiZmV0Y2hMYXN0Q3JlYXRlZFJlY29yZCIsImNyZWF0ZWQiLCJyZWNvcmQiLCJwYXRoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQUEsbUJBQU9DLE1BQVA7O0FBQ0EsSUFBTUMsbUJBQW1CLEdBQUc7QUFDMUJDLEVBQUFBLGdCQUQwQiw0QkFDVEMsR0FEUyxFQUNKQyxHQURJLEVBQ0M7QUFDekIsUUFBTUMseUJBQXlCLEdBQUdGLEdBQUcsQ0FBQ0csT0FBSixDQUFZQyxhQUE5Qzs7QUFDQSxRQUFNQywrQ0FBK0MsR0FBR0MseUJBQUlDLE1BQUosQ0FBV0wseUJBQVgsRUFBc0NNLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxVQUFsRCxD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LENBQUNxQixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRUQsUUFBQUEsTUFBTSxFQUFFLEdBQVY7QUFBZUUsUUFBQUEsT0FBTyxlQUFRbkIsK0NBQStDLENBQUNvQixRQUF4RCxzREFBNEdMLHlCQUFRbUIsT0FBcEgsQ0FBdEI7QUFBcUpDLFFBQUFBLE1BQU0sRUFBRUg7QUFBN0osT0FBckI7QUFDRDtBQUNGO0FBNUV5QixDQUE1QjtlQThFZXZDLG1CIiwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcUG9zaXRpdm9fQ29tcHV0ZXJcXERlc2t0b3BcXGJyb2FkY2FzdC1hbmRlbGEtY3ljbGUxM1xcc2VydmVyXFx2MVxcYXBpXFxjb250cm9sbGVycyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCBpbXBEYXRhIGZyb20gJy4uL21vZGVscy9EQic7XG5pbXBvcnQgaW1waGVscCBmcm9tICcuLi9oZWxwZXJzL2NyZWF0ZUhlbHBlcic7XG5cbmRvdGVudi5jb25maWcoKTtcbmNvbnN0IGNyZWF0ZVNpbmdsZVJlY29yZHMgPSB7XG4gIGNyZWF0ZU9uZVJlY29yZHMocmVxLCByZXMpIHtcbiAgICBjb25zdCByZWNlaXZlX3Rva2VuX2Zyb21faGVhZGVyID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcbiAgICBjb25zdCBkZWNvZGVkX3Rva2VuX2luX3RoZV93YXlfdG9fb2J0YWluX3VzZXJfZGV0YWlscyA9IGp3dC52ZXJpZnkocmVjZWl2ZV90b2tlbl9mcm9tX2hlYWRlciwgcHJvY2Vzcy5lbnYuU0VDUkVUX0tFWSk7XG4gICAgY29uc3QgeyB0aXRsZSwgdHlwZSwgbGF0aXR1ZGUsIGxvbmdpdHVkZSwgaW1hZ2VzLCB2aWRlb3MsIGNvbW1lbnQgfSA9IHJlcS5ib2R5O1xuXG4gICAgY29uc3QgY2tUaXRsZSA9IGltcGhlbHAuY2hlY2tfdGl0bGVfaWZfaXNfZW1wdHkodGl0bGUpO1xuICAgIGlmIChja1RpdGxlKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdGF0dXM6IDQwMCwgbWVzc2FnZTogYEhleSAke2RlY29kZWRfdG9rZW5faW5fdGhlX3dheV90b19vYnRhaW5fdXNlcl9kZXRhaWxzLnVzZXJuYW1lfSByZWNvcmQgdGl0bGUgaXMgbmVlZGVkICEhYCB9KTtcblxuICAgIGNvbnN0IGNrVHlwZSA9IGltcGhlbHAuY2hlY2tfdHlwZV9pZl9pc19lbXB0eSh0eXBlKTtcbiAgICBpZiAoY2tUeXBlKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdGF0dXM6IDQwMCwgbWVzc2FnZTogYEhleSAke2RlY29kZWRfdG9rZW5faW5fdGhlX3dheV90b19vYnRhaW5fdXNlcl9kZXRhaWxzLnVzZXJuYW1lfSByZWNvcmQgdHlwZSBpcyBuZWVkZWQgISFgIH0pO1xuXG4gICAgY29uc3QgY2tDb21tZW50ID0gaW1waGVscC5jaGVja19jb21tZW50X2lmX2lzX2VtcHR5KGNvbW1lbnQpO1xuICAgIGlmIChja0NvbW1lbnQpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN0YXR1czogNDAwLCBtZXNzYWdlOiBgSGV5ICR7ZGVjb2RlZF90b2tlbl9pbl90aGVfd2F5X3RvX29idGFpbl91c2VyX2RldGFpbHMudXNlcm5hbWV9IHJlY29yZCBjb21tZW50IGlzIG5lZWRlZCAhIWAgfSk7XG5cbiAgICBpZiAoIXJlcS5maWxlcy5pbWFnZXMgJiYgIXJlcS5maWxlcy52aWRlb3MpIHtcbiAgICAgIGNvbnN0IHJlYWR5RGF0YXMgPSB7XG4gICAgICAgIHVzZXJJZDogZGVjb2RlZF90b2tlbl9pbl90aGVfd2F5X3RvX29idGFpbl91c2VyX2RldGFpbHMuaWQsXG4gICAgICAgIGNyZWF0ZWRCeTogZGVjb2RlZF90b2tlbl9pbl90aGVfd2F5X3RvX29idGFpbl91c2VyX2RldGFpbHMudXNlcm5hbWUsXG4gICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgbGF0aXR1ZGU6IGxhdGl0dWRlLFxuICAgICAgICBsb25naXR1ZGU6IGxvbmdpdHVkZSxcbiAgICAgICAgaW1hZ2VzOiAnbm9uZScsXG4gICAgICAgIHZpZGVvczogJ25vbmUnLFxuICAgICAgICBjb21tZW50OiBjb21tZW50LFxuICAgICAgfTtcbiAgICAgIGltcERhdGEuY3JlYXRlZShyZWFkeURhdGFzKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBpbXBEYXRhLmZldGNoTGFzdENyZWF0ZWRSZWNvcmQocmVhZHlEYXRhcy51c2VySWQpO1xuICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBzdGF0dXM6IDIwMSwgbWVzc2FnZTogYEh5ICR7ZGVjb2RlZF90b2tlbl9pbl90aGVfd2F5X3RvX29idGFpbl91c2VyX2RldGFpbHMudXNlcm5hbWV9IHlvdXIgcmVjb3JkIGhhcyBjcmVhdGVkIHN1Y2Nlc3NmdWxseSBvbiAke2ltcGhlbHAuY3JlYXRlZH1gLCByZWNvcmQ6IGRhdGEgfSk7XG4gICAgfSBlbHNlIGlmICghcmVxLmZpbGVzLmltYWdlcykge1xuICAgICAgY29uc3QgcmVhZHlEYXRhcyA9IHtcbiAgICAgICAgdXNlcklkOiBkZWNvZGVkX3Rva2VuX2luX3RoZV93YXlfdG9fb2J0YWluX3VzZXJfZGV0YWlscy5pZCxcbiAgICAgICAgY3JlYXRlZEJ5OiBkZWNvZGVkX3Rva2VuX2luX3RoZV93YXlfdG9fb2J0YWluX3VzZXJfZGV0YWlscy51c2VybmFtZSxcbiAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICBsYXRpdHVkZTogbGF0aXR1ZGUsXG4gICAgICAgIGxvbmdpdHVkZTogbG9uZ2l0dWRlLFxuICAgICAgICBpbWFnZXM6ICdub25lJyxcbiAgICAgICAgdmlkZW9zOiByZXEuZmlsZXMudmlkZW9zWzBdLnBhdGgsXG4gICAgICAgIGNvbW1lbnQ6IGNvbW1lbnQsXG4gICAgICB9O1xuICAgICAgaW1wRGF0YS5jcmVhdGVlKHJlYWR5RGF0YXMpO1xuICAgICAgY29uc3QgZGF0YSA9IGltcERhdGEuZmV0Y2hMYXN0Q3JlYXRlZFJlY29yZChyZWFkeURhdGFzLnVzZXJJZCk7XG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IHN0YXR1czogMjAxLCBtZXNzYWdlOiBgSHkgJHtkZWNvZGVkX3Rva2VuX2luX3RoZV93YXlfdG9fb2J0YWluX3VzZXJfZGV0YWlscy51c2VybmFtZX0geW91ciByZWNvcmQgaGFzIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IG9uICR7aW1waGVscC5jcmVhdGVkfWAsIHJlY29yZDogZGF0YSB9KTtcbiAgICB9IGVsc2UgaWYgKCFyZXEuZmlsZXMudmlkZW9zKSB7XG4gICAgICBjb25zdCByZWFkeURhdGFzID0ge1xuICAgICAgICB1c2VySWQ6IGRlY29kZWRfdG9rZW5faW5fdGhlX3dheV90b19vYnRhaW5fdXNlcl9kZXRhaWxzLmlkLFxuICAgICAgICBjcmVhdGVkQnk6IGRlY29kZWRfdG9rZW5faW5fdGhlX3dheV90b19vYnRhaW5fdXNlcl9kZXRhaWxzLnVzZXJuYW1lLFxuICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIGxhdGl0dWRlOiBsYXRpdHVkZSxcbiAgICAgICAgbG9uZ2l0dWRlOiBsb25naXR1ZGUsXG4gICAgICAgIGltYWdlczogcmVxLmZpbGVzLmltYWdlc1swXS5wYXRoLFxuICAgICAgICB2aWRlb3M6ICdub25lJyxcbiAgICAgICAgY29tbWVudDogY29tbWVudCxcbiAgICAgIH07XG4gICAgICBpbXBEYXRhLmNyZWF0ZWUocmVhZHlEYXRhcyk7XG4gICAgICBjb25zdCBkYXRhID0gaW1wRGF0YS5mZXRjaExhc3RDcmVhdGVkUmVjb3JkKHJlYWR5RGF0YXMudXNlcklkKTtcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgc3RhdHVzOiAyMDEsIG1lc3NhZ2U6IGBIeSAke2RlY29kZWRfdG9rZW5faW5fdGhlX3dheV90b19vYnRhaW5fdXNlcl9kZXRhaWxzLnVzZXJuYW1lfSB5b3VyIHJlY29yZCBoYXMgY3JlYXRlZCBzdWNjZXNzZnVsbHkgb24gJHtpbXBoZWxwLmNyZWF0ZWR9YCwgcmVjb3JkOiBkYXRhIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZWFkeURhdGFzID0ge1xuICAgICAgICB1c2VySWQ6IGRlY29kZWRfdG9rZW5faW5fdGhlX3dheV90b19vYnRhaW5fdXNlcl9kZXRhaWxzLmlkLFxuICAgICAgICBjcmVhdGVkQnk6IGRlY29kZWRfdG9rZW5faW5fdGhlX3dheV90b19vYnRhaW5fdXNlcl9kZXRhaWxzLnVzZXJuYW1lLFxuICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIGxhdGl0dWRlOiBsYXRpdHVkZSxcbiAgICAgICAgbG9uZ2l0dWRlOiBsb25naXR1ZGUsXG4gICAgICAgIGltYWdlczogcmVxLmZpbGVzLmltYWdlc1swXS5wYXRoLFxuICAgICAgICB2aWRlb3M6IHJlcS5maWxlcy52aWRlb3NbMF0ucGF0aCxcbiAgICAgICAgY29tbWVudDogY29tbWVudCxcbiAgICAgIH07XG4gICAgICBpbXBEYXRhLmNyZWF0ZWUocmVhZHlEYXRhcyk7XG4gICAgICBjb25zdCBkYXRhID0gaW1wRGF0YS5mZXRjaExhc3RDcmVhdGVkUmVjb3JkKHJlYWR5RGF0YXMudXNlcklkKTtcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgc3RhdHVzOiAyMDEsIG1lc3NhZ2U6IGBIeSAke2RlY29kZWRfdG9rZW5faW5fdGhlX3dheV90b19vYnRhaW5fdXNlcl9kZXRhaWxzLnVzZXJuYW1lfSB5b3VyIHJlY29yZCBoYXMgY3JlYXRlZCBzdWNjZXNzZnVsbHkgb24gJHtpbXBoZWxwLmNyZWF0ZWR9YCwgcmVjb3JkOiBkYXRhIH0pO1xuICAgIH1cbiAgfSxcbn07XG5leHBvcnQgZGVmYXVsdCBjcmVhdGVTaW5nbGVSZWNvcmRzO1xuIl19